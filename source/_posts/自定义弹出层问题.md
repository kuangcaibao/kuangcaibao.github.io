---
title: 自定义弹出层问题
date: 2017-03-29 22:52:30
tags:
  - trick
  - css
categories:
  - trick
---

# 1. 简单示例代码

一个简单的示例弹出层代码：

```
// index.html
<html>
<head>
  <title>弹出层</title>
  <meta charset=utf-8>
  <meta name=description content="弹出层">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <style type="text/css">
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #000;
      opacity: 0.6;
      z-index: 1000;
    }
    .modal-detail {
      width: 400px;
      height: 300px;
      background-color: #fff;
      color: #000;
    }
  </style>
</head>
<body>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <p>测试文本信息测试文本信息测试文本信息测试文本信息测试文本信息</p>
  <div class="modal">
    <div class="modal-detail">
      <p>这是一个弹出层信息</p>
      <button>这是一个按钮</button>
    </div>
  </div>
</body>
</html>
```

浏览器中打开的效果图如下：

{% qnimg 弹出层效果图.png title:弹出层效果图 alt:waiting  %}

# 2. 弹出层内容透明

这个是因为 `opacity` 这个属性，被子节点继承了，也就是说 `modal-detail` 节点的 `opacity` 属性也是透明的。如何解决这个问题，我们改掉父节点的写法。

```
.modal {
  ...
  /*background-color: #000;
  opacity: 0.6;*/
  background: rgba(0, 0, 0, 0.6);
}
```

至于为什么我们重新设置 `.modal-detail` 中的属性 `opacity: 1`, 背景还是透明的，这个不知道原因。

# 3. modal 节点 position 的问题

上面设置的 `position: fixed;` 这个显示是正常的。如果把这个属性改成 `position: absolute;`，当 `p` 中的内容触发浏览器窗口出现滚动的时候。这个时候弹出层，会发现只覆盖了最上面的一屏幕区域，下面的滚动区域没有覆盖到，具体效果自己可以测试看看。

# 4. 总结

`.modal` 的这个节点的 `css` 样式要注意 2 个地方：

1. `position: fixed;`

2. `background-color, opacity` 这个组合设置背景透明遮罩效果改成 `background: rgba(...)`